

<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> backend/routes/routes.js</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
            
             
                <a href="index.html">
                    <h1 class="navbar-item">SiincTv</h1>
                </a>
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    API Documentation
                </a>
                
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar "
            id="sidebarNav"
        >
            
            <nav>
                
                    <h2><a href="index.html">Documentation</a></h2><div class="category"></div><div class="category"><h2>Backend</h2><h3>Modules / Controllers</h3><ul><li><a href="module-FollowController.html">FollowController</a></li><li><a href="module-FriendsControler.html">FriendsControler</a></li><li><a href="module-NotificationController.html">NotificationController</a></li><li><a href="module-StreamController.html">StreamController</a></li><li><a href="module-TwitchController.html">TwitchController</a></li><li><a href="module-UserController.html">UserController</a></li><li><a href="module-YoutubeController.html">YoutubeController</a></li></ul><h3>Modules</h3><ul><li><a href="module-FriendNotification.html">FriendNotification</a></li><li><a href="module-PassportSetup.html">PassportSetup</a></li><li><a href="module-Server.html">Server</a></li><li><a href="module-Sockets.html">Sockets</a></li></ul><h3>Modules / Routes</h3><ul><li><a href="module-Routes.html">Routes</a></li></ul><h3>Classes / User Models</h3><ul><li><a href="facebookData.html">facebookData</a></li><li><a href="followData.html">followData</a></li><li><a href="friendsData.html">friendsData</a></li><li><a href="googleData.html">googleData</a></li><li><a href="notification.html">notification</a></li><li><a href="notificationData.html">notificationData</a></li><li><a href="twitchData.html">twitchData</a></li><li><a href="upComingEventData.html">upComingEventData</a></li><li><a href="user.html">user</a></li></ul><h3>Classes / Stream Models</h3><ul><li><a href="registeredViewerData.html">registeredViewerData</a></li><li><a href="streamData.html">streamData</a></li><li><a href="streamerData.html">streamerData</a></li><li><a href="streamGroup.html">streamGroup</a></li></ul></div><div class="category"><h2>Frontend</h2><h3>Modules</h3><ul><li><a href="module-App.html">App</a></li></ul><h3>Modules / Social</h3><ul><li><a href="module-Follow.html">Follow</a></li><li><a href="module-Friends.html">Friends</a></li></ul><h3>Modules / NavProfileMenu</h3><ul><li><a href="module-NavComponenets.html">NavComponenets</a></li></ul><h3>Modules / Provider</h3><ul><li><a href="module-SocketProvider.html">SocketProvider</a></li><li><a href="module-UserProvider.html">UserProvider</a></li></ul><h3>Classes / Actions</h3><ul><li><a href="streamActions.html">streamActions</a></li><li><a href="userActions.html">userActions</a></li></ul><h3>Classes</h3><ul><li><a href="userUtils.html">userUtils</a></li></ul><h3>Components</h3><ul><li><a href="Chat.html">Chat</a></li><li><a href="ChatHandler.html">ChatHandler</a></li><li><a href="LiveStreamFeed.html">LiveStreamFeed</a></li><li><a href="LoggedViewers.html">LoggedViewers</a></li><li><a href="ReccomendedFeed.html">ReccomendedFeed</a></li></ul><h3>Components / Search</h3><ul><li><a href="CombinedSearch.html">CombinedSearch</a></li><li><a href="StreamSearchResults.html">StreamSearchResults</a></li><li><a href="UserSearchResults.html">UserSearchResults</a></li></ul><h3>Components / Pages</h3><ul><li><a href="CreateStreamPage.html">CreateStreamPage</a></li><li><a href="HomePage.html">HomePage</a></li><li><a href="LivetreamPage.html">LivetreamPage</a></li><li><a href="Profile.html">Profile</a></li><li><a href="SearchPage.html">SearchPage</a></li><li><a href="Stream.html">Stream</a></li></ul><h3>Components / Selectors</h3><ul><li><a href="FriendFinder.html">FriendFinder</a></li><li><a href="module.html#.exports">exports</a></li></ul><h3>Components / Notifications</h3><ul><li><a href="JoinStreamRequestNotification.html">JoinStreamRequestNotification</a></li><li><a href="JoinStreamRequestResponse.html">JoinStreamRequestResponse</a></li><li><a href="NewFollowerNotification.html">NewFollowerNotification</a></li><li><a href="NewStreamFollowNotification.html">NewStreamFollowNotification</a></li><li><a href="NotificationHandler.html">NotificationHandler</a></li><li><a href="NotificationMenu.html">NotificationMenu</a></li><li><a href="NoYoutubeAccount.html">NoYoutubeAccount</a></li><li><a href="timeSince.html">timeSince</a></li><li><a href="WelcomeNotification.html">WelcomeNotification</a></li></ul><h3>Components / Live stream</h3><ul><li><a href="LiveStream.html">LiveStream</a></li><li><a href="SingleStreamViewBox.html">SingleStreamViewBox</a></li><li><a href="SplitScreenViewBox.html">SplitScreenViewBox</a></li><li><a href="StreamDetails.html">StreamDetails</a></li><li><a href="StreamerCircle.html">StreamerCircle</a></li><li><a href="Streamers.html">Streamers</a></li><li><a href="StreamSelector.html">StreamSelector</a></li><li><a href="StreamSelectorBar.html">StreamSelectorBar</a></li><li><a href="StreamSocket.html">StreamSocket</a></li><li><a href="YoutubeLiveStream.html">YoutubeLiveStream</a></li></ul><h3>Components / Previews</h3><ul><li><a href="LiveStreamPreview.html">LiveStreamPreview</a></li><li><a href="UserPreview.html">UserPreview</a></li></ul><h3>Components / NavBar</h3><ul><li><a href="NavCreateStreamButton.html">NavCreateStreamButton</a></li><li><a href="NavSearchComponent.html">NavSearchComponent</a></li><li><a href="NavSiincHome.html">NavSiincHome</a></li></ul><h3>Components / Menu</h3><ul><li><a href="NavigationBar.html">NavigationBar</a></li><li><a href="NavProfileMenu.html">NavProfileMenu</a></li><li><a href="SideBar.html">SideBar</a></li></ul><h3>Components / Stream Creation</h3><ul><li><a href="NewLiveStream.html">NewLiveStream</a></li><li><a href="NewScheduledStream.html">NewScheduledStream</a></li><li><a href="StreamDatePicker.html">StreamDatePicker</a></li><li><a href="TeamBlock.html">TeamBlock</a></li></ul><h3>Components / Sidebar</h3><ul><li><a href="OnlineStatus.html">OnlineStatus</a></li></ul><h3>Components / User Signing</h3><ul><li><a href="SignIn.html">SignIn</a></li><li><a href="SigningModal.html">SigningModal</a></li><li><a href="Signup.html">Signup</a></li><li><a href="UserSigning.html">UserSigning</a></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p>Source</p>
                    <h1>backend/routes/routes.js</h1>
                </header>
                



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * This modules defines all the routes in our backend API
 * 
 * @module Routes
 * @category Backend
 * @subcategory Routes
 */

var express = require('express')
const passport = require("passport");
var router = express.Router()

// our controllers
var userController = require('../controllers/userController')
var streamController = require('../controllers/streamController')
var twitchController = require('../controllers/twitchController')
var friendsController = require('../controllers/friendsController')
var youtubeController = require('../controllers/youtubeController')
var notificationController = require('../controllers/notificationController')
var followController = require('../controllers/followController')


/**
 * Login using a local strategy.
 *
 * @name User Login
 * @route {POST} /api/signin
 * @bodyparam {String} username to login with
 * @bodyparam {String} password to login with
 */
router.post('/signin',userController.user_login);

/**
 * Logout from currently logged in user, uses session data.
 *
 * @name User Logout
 * @route {POST} /api/signout
 */
router.post('/signout',userController.logout); 

/**
 * Sign up using a local strategy.
 *
 * @name User Login
 * @route {POST} /api/signup
 * @bodyparam {String} username to signup with
 * @bodyparam {String} password to signup with
* @bodyparam {String} email to signup with
 */
router.post('/signup',userController.user_signup);

/**
 * Returns up-to-date data of the user logged in to the session.
 *
 * @name Get User
 * @route {GET} /api/user
 */
router.get('/user',userController.get_user);

/**
 * Get data regarding a specific user
 *
 * @name Get User Data
 * @route {POST} /api/userdata
 * @bodyparam {String} username to get data of
 */
router.post('/userdata',userController.get_user_data);

/**
 * Checks if a user with a given user name already exists.
 *
 * @name Check Username
 * @route {POST} /api/userdata
 * @bodyparam {String} username to get data of
 */
router.post('/check_username',userController.check_username_exists);

/**
 * Authenticates user using Twitch API
 *
 * @name Twitch Auth
 * @route {GET} /api/auth/twitch
 */
router.get('/auth/twitch', userController.setRedirectURL, userController.twitch_auth);

/**
 * Callback for Twitch auth
 *
 * @name Twitch Auth callback
 * @route {GET} /api/auth/twitch/callback
 */
router.get('/auth/twitch/callback', userController.twitch_auth_callback, userController.successRedirect);

/**
 * Authenticates user using Google API
 *
 * @name Google Auth
 * @route {GET} /api/auth/google
 */
router.get('/auth/google', userController.setRedirectURL, userController.google_auth);

/**
 * Callback for Google auth
 *
 * @name Google Auth callback
 * @route {GET} /api/auth/google/callback
 */
router.get('/auth/google/callback', userController.google_auth_callback, userController.successRedirect);

/**
 * Authenticates user using Facebook API
 *
 * @name Facebook Auth
 * @route {GET} /api/auth/facebook
 */
router.get('/auth/facebook', userController.setRedirectURL, userController.facebook_auth);

/**
 * Callback for Facebook auth
 *
 * @name Facebook Auth callback
 * @route {GET} /api/auth/facebook/callback
 */
router.get('/auth/facebook/callback', userController.facebook_auth_callback, userController.successRedirect);

/**
 * Creates a stream with given details, user data must be valid.
 *
 * @name Create stream
 * @route {POST} /api/user/createstream
 * @bodyparam {StreamData} Data of the stream to create
 */
router.post('/user/createstream', streamController.createStream);

/**
 * Creates a stream with given details, user data must be valid.
 *
 * @name Get Stream By Id
 * @route {POST} /api/user/find_stream_data
 * @bodyparam {String} streamId id of the stream to get data of
 */
router.post('/user/find_stream_data', streamController.getStreamById);

/**
 * Searches for streams by search string, return the page of results by page
 *
 * @name Search streams
 * @route {POST} /api/search/streams
 * @bodyparam {String} searchString string to search streams by
 * @bodyparam {String} page to return
 * @bodyparam {String} status stream status
 */
router.post('/search/streams', streamController.searchStreams);

/**
 * Returns page of all streams with status
 *
 * @name Search streams by status
 * @route {POST} /api/feed/streams
 * @bodyparam {String} page to return
 * @bodyparam {String} status stream status
 */
router.post('/feed/streams', streamController.getStreamsByStatus);

/**
 * Returns all the data from twitch regarding the streams given
 *
 * @name Get twitch streams
 * @route {POST} /api/twitch/get_streams
 * @bodyparam {streamGroup[]} streamGroups List of all the groups of streamers to search data for
 */
router.post('/twitch/get_streams', twitchController.getAllStreamGroupsStreams);

/**
 * Returns all the data from twitch regarding the streams given
 *
 * @name Get YouTube Live video id by channel id
 * @route {POST} /api/youtube/getLiveVideoId
 * @bodyparam {String} ChannelId of all the groups of streamers to search data for
 */
router.post('/youtube/getLiveVideoId', youtubeController.getLiveVideoId);

/**
 * Searches for users by search string, return the page of results by page
 *
 * @name Search users
 * @route {POST} /api/search/users
 * @bodyparam {String} searchString string to search users by
 * @bodyparam {String} page to return
 */
router.post('/search/users', userController.searchUsers);

/**
 * Sets redirect URL in order to keep users logout/login on same page
 *
 * @name Set Redirect Url
 * @route {POST} /api/auth/setRedirectUrl
 * @headerparam {String} referer URL to redirect to
 */
router.post('/auth/setRedirectUrl', userController.setRedirectURL);
 
// POST request handle friends
router.post('/user/friends', friendsController.handleFriendsRequest);

// POST request handle follows
router.post('/user/follow', followController.handleFollowRequest);

/**
 * Closes the user's current stream if it exists
 *
 * @name Close stream
 * @route {POST} /api/streams/closeStream
 */
router.post('/streams/closeStream', streamController.closeStream);

/**
 * Deletes a given notification from the logged in user
 *
 * @name Delete notification
 * @route {POST} /api/notifications/deleteNotification
 * @bodyparam {String} notificationId Id of the notification to delete
 */
router.post('/notifications/deleteNotification', notificationController.deleteNotificationFromCurrentUser);

/**
 * Deletess all clearable notifications from current users
 *
 * @name Delete notification
 * @route {POST} /api/notifications/clearNotifications
 */
router.post('/notifications/clearNotifications', notificationController.clearAllClearableNotifications);

/**
 * Requests to join a stream of a given stream creator
 *
 * @name Request to join stream
 * @route {POST} /api/streams/requestToJoinStream
 * @bodyparam {String} creatorId Id of the creator of the stream to request to join
 * @bodyparam {streamerData} data streamerData of the user requesting to join
 */
router.post('/streams/requestToJoinStream', streamController.requestToJoinStream);

/**
 * Rejects a request to join stream
 *
 * @name Reject request to join stream
 * @route {POST} /api/streams/rejectRequestToJoin
 * @bodyparam {streamerData} data streamerData of the user to reject
 */
router.post('/streams/rejectRequestToJoin', streamController.rejectRequestToJoin);

/**
 * Accepts a request to join stream
 *
 * @name Accept request to join stream
 * @route {POST} /api/streams/acceptRequestToJoin
 * @bodyparam {streamerData} data streamerData of the user to accept
 */
router.post('/streams/acceptRequestToJoin', streamController.acceptRequestToJoin);

//TODO: Delete this
// POST request poke yourself
router.post('/test/selfPoke', notificationController.pokeYourself);

/**
 * Update users profile description
 *
 * @name UpdateDescription
 * @route {POST} /api/user/update_field
 * @bodyparam {userId} id of user
 * @bodyparam {shortDescription} new description text
 */
router.post('/user/update_field', userController.updateUserShortDescription)

/**
 * Update users interests
 *
 * @name UpdateInterests
 * @route {POST} /api/user/update_interests
 * @bodyparam {userId} id of user
 * @bodyparam {interests} interests list
 */
router.post('/user/update_interests', userController.updateUserInterests)

/**
 * Check if user is online
 *
 * @name IsUserOnline
 * @route {POST} api/user/is_user_online
 * @bodyparam {userId} users id
 */
router.post('/user/is_user_online', userController.isUserOnline)

module.exports = router;
</code></pre>
        </article>
    </section>




            </div>
            
            <footer class="footer">
                <div class="content has-text-centered">
                    <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a></p>
                    <p class="sidebar-created-by">
                        <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by 
                        <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
                    </p>
                </div>
            </footer>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>

</body>
</html>
